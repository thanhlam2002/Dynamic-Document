<?page title="Danh sÃ¡ch vÄƒn báº£n" contentType="text/html;charset=UTF-8"?>
<zk>
  <window width="100%" title="Danh sÃ¡ch vÄƒn báº£n"
          apply="org.zkoss.bind.BindComposer"
          viewModel="@id('vm') @init('com.example.docflow.vm.DocumentListVM')">
    <vbox hflex="1" vflex="1" spacing="8px" style="padding:12px">

      <!-- Thanh cÃ´ng cá»¥ trÃªn cÃ¹ng -->
<hlayout hflex="1" spacing="8px"
         style="padding:8px 12px; background:#f7f7f7; border-bottom:1px solid #eee; display:flex; align-items:center;">
  <label value="ðŸ“„ Danh sÃ¡ch vÄƒn báº£n" style="font-weight:bold;"/>
  <hlayout hflex="1"/>
  <label value="@load(vm.currentUserLabel)" style="color:#666; margin-right:8px"/>
  <button label="Dashboard" onClick="@command('goDashboard')" tooltiptext="Xem thá»‘ng kÃª"/>
  <button label="Logout" onClick="@command('logout')" tooltiptext="ÄÄƒng xuáº¥t"/>
</hlayout>

      <!-- Bá»™ lá»c -->
      <hbox spacing="8px">
        <textbox placeholder="TÃ¬m (sá»‘ hiá»‡u/tiÃªu Ä‘á»/ná»™i dung)"
                 value="@bind(vm.keyword)" width="320px"/>

        <combobox width="160px" placeholder="Loáº¡i"
                  model="@load(vm.typeOptionsAll)"
                  selectedItem="@bind(vm.type)" autodrop="true" readonly="true"
                  onSelect="@command('search')">
          <template name="model" var="t">
            <comboitem label="@load(vm.labelOfType(t))" value="@load(t)"/>
          </template>
        </combobox>

        <combobox width="180px" placeholder="Tráº¡ng thÃ¡i"
                  model="@load(vm.statusOptionsAll)"
                  selectedItem="@bind(vm.status)" autodrop="true" readonly="true"
                  onSelect="@command('search')">
          <template name="model" var="s">
            <comboitem label="@load(vm.labelOfStatus(s))" value="@load(s)"/>
          </template>
        </combobox>

        <datebox placeholder="Tá»« ngÃ y" value="@bind(vm.fromDate)" format="dd/MM/yyyy"/>
        <datebox placeholder="Äáº¿n ngÃ y" value="@bind(vm.toDate)" format="dd/MM/yyyy"/>

        <button label="TÃ¬m" onClick="@command('search')"/>
        <button label="Táº¡o má»›i" onClick='Executions.sendRedirect("new_document.zul")'/>
      </hbox>

      <!-- Paging ngoÃ i: chá»‰ Ä‘á»ƒ UI Ä‘iá»u khiá»ƒn -->
      <paging id="pg" detailed="true"
              activePage="@load(vm.activePage)"
              totalSize="@load(vm.totalSize)"
              pageSize="@load(vm.pageSize)"
              onPaging="@command('gotoPage', page=event.activePage)"/>

      <!-- Grid KHÃ”NG dÃ¹ng mold='paging' vÃ  KHÃ”NG cÃ³ <paging> con -->
      <grid model="@bind(vm.documents)" sizedByContent="true" hflex="1">
        <columns>
          <column label="Sá»‘ hiá»‡u" width="120px"/>
          <column label="TiÃªu Ä‘á»"/>
          <column label="Loáº¡i" width="90px"/>
          <column label="Tráº¡ng thÃ¡i" width="120px"/>
          <column label="NgÃ y" width="180px"/>
          <column label="" width="100px"/>
        </columns>
        <rows>
          <template name="model" var="d" model="@bind(vm.documents)">
            <row>
              <label value="@load(d.docNo)"/>
              <label value="@load(d.title)"/>
              <label value="@load(d.type)"/>
              <label value="@load(d.status)"/>
              <label value="@load(d.displayDate)"/>
              <button label="Xem" onClick="@command('openDetail', id=d.id)"/>
            </row>
          </template>
        </rows>
      </grid>

    </vbox>
  </window>
</zk>
